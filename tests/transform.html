<canvas></canvas>
<canvas id="canvas"></canvas>
<script>
	const cvs = document.querySelector("canvas")
	cvs.width = 128
	cvs.height = 128
	const ctx = cvs.getContext("2d")
	ctx.strokeStyle = "black"
	ctx.beginPath()
	ctx.moveTo(24, 48)
	ctx.lineTo(40, 48)
	ctx.stroke()

	const [sin, cos] = [Math.sin(Math.PI / 4), Math.cos(Math.PI / 4)]
	ctx.transform(cos, sin, -sin, cos, 0, 0)
	ctx.fillStyle = "red"
	ctx.fillRect(24, 16, 16, 32)

	function draw() {
		const cvs = document.getElementById("canvas")
		cvs.height = 300
		const ctx = cvs.getContext("2d");

		const sin = Math.sin(Math.PI / 6);
		const cos = Math.cos(Math.PI / 6);
		ctx.translate(100, 100);
		let c = 0;
		for (let i = 0; i <= 12; i++) {
			c = Math.floor((255 / 12) * i);
			ctx.fillStyle = `rgb(${c} ${c} ${c})`;
			ctx.fillRect(0, 0, 100, 10);
			ctx.transform(cos, sin, -sin, cos, 0, 0);
		}

		ctx.setTransform(-1, 0, 0, 1, 100, 100);
		ctx.fillStyle = "rgb(255 128 255 / 50%)";
		ctx.fillRect(0, 50, 100, 100);
	}
	draw()
</script>
